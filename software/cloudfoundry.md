# Cloud Foundry Howto

## Install CF Client
* Ubuntu / Debian
```
wget -q -O - https://packages.cloudfoundry.org/debian/cli.cloudfoundry.org.key | sudo apt-key add -
echo "deb http://packages.cloudfoundry.org/debian stable main" | sudo tee /etc/apt/sources.list.d/cloudfoundry-cli.list
sudo apt-get update
sudo apt-get install cf-cli
```

## Install PCF DEV
* Install Virtualbox
* Download the latest version
  * https://network.pivotal.io/products/pcfdev
```
unzip pcfdev-VERSION-linux.zip
./pcfdev-VERSION-linux
cf dev start
```
* Enter Username and Password
* When all apps are up and running take a snapshot of the vm 

## CF VM Usage
```
cf dev help
cf dev start
cf dev status
cf dev suspend # Save VM current state to disk and stop VM.
cf dev resume
cf dev ssh
cf dev stop
cf dev destroy # destroys the created vm
```
* Check you can login as instructed
  * Apps Manager URL: https://apps.local.pcfdev.io
  * Admin user => Email: admin / Password: admin
  * Regular user => Email: user / Password: pass
  * IF NOT...
    * Add google's public domain name servers to your network interface properly
    * OR simply add temporarily to /etc/resolv.conf
```
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
nameserver 8.8.8.8
nameserver 8.8.4.4
nameserver 127.0.1.1
search local
```

## Install Sample App
```
git clone https://github.com/cloudfoundry-samples/spring-music
cd ./spring-music

# Login to PCF DEV
cf login -a api.local.pcfdev.io --skip-ssl-validation
# login credentials
# user pass
# admin admin

./gradlew assemble

cf push --hostname spring-music
# Open sample app in your browser: http://spring-music.local.pcfdev.io
```

## Push Jar to CF
```
cf push name-of-app -p target/my.jar
```
* Navigate to: https://apps.local.pcfdev.io
  * pcfdev-space
    * Locate your app and you should see its URL under ROUTE

## Administrate Apps on Cloudfoundry
* Browse: https://apps.local.pcfdev.io
  * U: user
  * P: pass
  * Go to pcfdev-space
    * Click on the app of choice
      * Should see its URL as ROUTE

## References
* https://stackoverflow.com/questions/36596743/how-to-install-cloudfoundry-on-local-server
* https://pivotal.io/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry-dev/introduction
* https://github.com/pivotal-cf/pcfdev
* https://developers.google.com/speed/public-dns/
